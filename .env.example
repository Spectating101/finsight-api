# FinSight API - Environment Variables Configuration

# === Database ===
DATABASE_URL=postgresql://user:password@localhost:5432/finsight_production
DATABASE_POOL_SIZE=20

# === Redis Cache ===
REDIS_URL=redis://localhost:6379/0
# For Heroku Redis with TLS, use: rediss://...

# === API Keys - Data Sources ===
# Polygon.io - Real-time market data (PRIMARY)
# Get free key: https://polygon.io/dashboard/signup
# Free tier: 5 calls/min, Professional tier recommended: $200/mo
POLYGON_API_KEY=your_polygon_api_key_here

# Alpha Vantage - Historical data + fundamentals (SECONDARY)
# Get free key: https://www.alphavantage.co/support/#api-key
# Free tier: 5 calls/min (25/day), Premium: $50+/mo
ALPHA_VANTAGE_API_KEY=your_alphavantage_api_key_here

# Finnhub - News + sentiment (SECONDARY)
# Get free key: https://finnhub.io/register
# Free tier: 60 calls/min, Premium: $60+/mo
FINNHUB_API_KEY=your_finnhub_api_key_here

# SEC EDGAR - Filings (always free)
SEC_USER_AGENT="FinSight API/1.0 (your-email@example.com)"

# yfinance - Free tier fallback (no key required)
YAHOO_FINANCE_TIMEOUT=30

# === LLM Providers (for AI synthesis) ===
GROQ_API_KEY=gsk_xxx
CEREBRAS_API_KEY=csk_xxx
OPENROUTER_API_KEY=sk_xxx

# === Authentication & Billing ===
# Stripe - Payment processing
# Get keys: https://dashboard.stripe.com/apikeys
STRIPE_SECRET_KEY=sk_test_your_stripe_secret_key
STRIPE_PUBLISHABLE_KEY=pk_test_your_stripe_publishable_key
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret

# JWT secret for API key generation
JWT_SECRET_KEY=generate_random_256_bit_secret_here_generate_with_openssl
API_KEY_SALT=generate_random_salt_here

# === Monitoring ===
# Sentry - Error tracking (optional but recommended)
# Get DSN: https://sentry.io/signup/
SENTRY_DSN=https://your_sentry_dsn_here
ENVIRONMENT=production

# === Server Configuration ===
HOST=0.0.0.0
PORT=8000
DEBUG=false
LOG_LEVEL=INFO

# CORS origins (comma-separated)
ALLOWED_ORIGINS=https://finsight.io,https://app.finsight.io

# === Rate Limits (requests per minute) ===
RATE_LIMIT_FREE=10
RATE_LIMIT_STARTER=50
RATE_LIMIT_PRO=200
RATE_LIMIT_ENTERPRISE=1000

# === Feature Flags ===
ENABLE_WEBHOOKS=false
ENABLE_BACKTESTING=false

# === Data Source Costs (for reference) ===
# Polygon.io: $0 (free tier) or $200/mo (professional)
# Alpha Vantage: $0 (free tier, 500 calls/day) or $50/mo (premium)
# Finnhub: $0 (free tier) or $60/mo (starter)
# Total monthly cost for production: ~$310/mo for all premium tiers
# Revenue per Pro customer: $199/mo
# Break-even: 2 Pro customers

# === Tier-Based Source Routing ===
# FREE tier: yfinance only (15-min delayed)
# STARTER tier: yfinance + Alpha Vantage + Finnhub (delayed)
# PROFESSIONAL tier: All sources including Polygon real-time
# ENTERPRISE tier: Dedicated infrastructure + custom models

# === Production Deployment (Heroku) ===
# 1. Set all API keys as Heroku config vars
# 2. Add Heroku Postgres addon: heroku addons:create heroku-postgresql:standard-0
# 3. Add Heroku Redis addon: heroku addons:create heroku-redis:premium-0
# 4. Set REDIS_URL to use SSL: rediss://...
# 5. Run migrations: heroku run python -m alembic upgrade head
# 6. Deploy: git push heroku main

# === Local Development ===
# 1. Copy this file to .env
# 2. Update all API keys
# 3. Run: docker-compose up -d (for PostgreSQL + Redis)
# 4. Run: python -m alembic upgrade head
# 5. Run: uvicorn src.main:app --reload
